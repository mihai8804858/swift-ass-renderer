{"sections":[{"kind":"hero","title":"AVPlayerLayer Integration","chapter":"AVPlayerLayer Integration","estimatedTimeInMinutes":10,"content":[{"type":"paragraph","inlineContent":[{"text":"Learn how to easily integrate ","type":"text"},{"code":"SwiftAssRenderer","type":"codeVoice"},{"type":"text","text":" with "},{"type":"codeVoice","code":"AVKit"},{"type":"text","text":"’s "},{"type":"codeVoice","code":"AVPlayerLayer"},{"type":"text","text":"."}]}]},{"kind":"tasks","tasks":[{"stepsSection":[{"caption":[],"media":null,"runtimePreview":null,"code":"avplayerlayer-1.swift","type":"step","content":[{"inlineContent":[{"type":"text","text":"Let’s start by creating a new view controller called "},{"type":"codeVoice","code":"VideoPlayerViewController"},{"type":"text","text":" and inherit it from "},{"code":"UIViewController","type":"codeVoice"},{"text":". We also need to import ","type":"text"},{"type":"codeVoice","code":"UIKit"},{"text":", ","type":"text"},{"code":"AVFoundation","type":"codeVoice"},{"type":"text","text":" and "},{"type":"codeVoice","code":"SwiftAssRenderer"},{"text":".","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"In order for us to be able to use "},{"code":"AVPlayerLayer","type":"codeVoice"},{"text":", let’s create a ","type":"text"},{"type":"codeVoice","code":"UIView"},{"text":" subclass called ","type":"text"},{"type":"codeVoice","code":"ViewPlayerView"},{"text":", and override the ","type":"text"},{"type":"codeVoice","code":"layerClass"},{"type":"text","text":" to "},{"code":"AVPlayerLayer.self","type":"codeVoice"},{"text":", which will be used when creating the underlaying layer for the view. We can also add a convenience initializer that takes an ","type":"text"},{"type":"codeVoice","code":"AVPlayer"},{"type":"text","text":" and assigns it to the "},{"type":"codeVoice","code":"AVPlayerLayer"},{"text":".","type":"text"}]}],"media":null,"runtimePreview":null,"type":"step","caption":[],"code":"avplayerlayer-2.swift"},{"code":"avplayerlayer-3.swift","runtimePreview":null,"type":"step","caption":[],"media":null,"content":[{"inlineContent":[{"type":"text","text":"Now let’s create our "},{"code":"AVPlayer","type":"codeVoice"},{"type":"text","text":" by providing an URL to either a local or remote file."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Next, let’s create our renderer. We need to at least specify the URL path where the fonts are located that will be used to render the subtitles."}]}],"type":"step","caption":[],"code":"avplayerlayer-4.swift","runtimePreview":null,"media":null},{"caption":[],"type":"step","code":"avplayerlayer-5.swift","content":[{"type":"paragraph","inlineContent":[{"text":"Now that we have our ","type":"text"},{"code":"AVPlayer","type":"codeVoice"},{"text":", let’s instantiate the previously created ","type":"text"},{"code":"VideoPlayerView","type":"codeVoice"},{"text":" and add it as a property.","type":"text"}]}],"runtimePreview":null,"media":null},{"code":"avplayerlayer-6.swift","content":[{"inlineContent":[{"type":"text","text":"We will also need an instance of "},{"type":"codeVoice","code":"AssSubtitlesView"},{"type":"text","text":" that we’ll add to view hierarchy on top of the player."}],"type":"paragraph"}],"type":"step","runtimePreview":null,"caption":[],"media":null},{"media":null,"code":"avplayerlayer-7.swift","content":[{"inlineContent":[{"type":"text","text":"To add the player view to hierarchy, let’s create a separate method for it and call it from "},{"code":"viewDidLoad()","type":"codeVoice"},{"type":"text","text":"."}],"type":"paragraph"}],"type":"step","runtimePreview":null,"caption":[]},{"code":"avplayerlayer-8.swift","runtimePreview":null,"type":"step","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"We can use autolayout to attach the player view to "},{"type":"codeVoice","code":"view"},{"type":"text","text":"’s top, bottom, leading and trailing anchors."}]}],"caption":[],"media":null},{"type":"step","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"To add the subtitles view to hierarchy, let’s create another separate method for it and call it from "},{"code":"viewDidLoad()","type":"codeVoice"},{"type":"text","text":"."}]}],"code":"avplayerlayer-9.swift","media":null,"caption":[],"runtimePreview":null},{"caption":[],"code":"avplayerlayer-10.swift","media":null,"type":"step","content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"SwiftAssRenderer"},{"text":" provides a helper method to attach the subtitles view to ","type":"text"},{"type":"codeVoice","code":"AVPlayerLayer"},{"type":"text","text":", automatically resize itself based on layer’s "},{"type":"codeVoice","code":"videoBounds"},{"type":"text","text":", and observe the player’s current time to update the renderer subtitles."}]}],"runtimePreview":null},{"content":[{"inlineContent":[{"type":"text","text":"We need another method called from "},{"code":"viewDidLoad()","type":"codeVoice"},{"type":"text","text":" that will load the subtitle contents and provide it to renderer."}],"type":"paragraph"}],"caption":[],"runtimePreview":null,"media":null,"type":"step","code":"avplayerlayer-11.swift"},{"code":"avplayerlayer-12.swift","caption":[],"content":[{"type":"paragraph","inlineContent":[{"text":"Next, let’s load the subtitles contents, either from local disk for web.","type":"text"}]}],"runtimePreview":null,"type":"step","media":null},{"type":"step","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"After contents have been loaded, we need to provide the contents for the renderer by calling "},{"code":"loadTrack(contents:)","type":"codeVoice"},{"text":".","type":"text"}]}],"caption":[],"media":null,"code":"avplayerlayer-13.swift","runtimePreview":null},{"media":null,"caption":[],"runtimePreview":null,"type":"step","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"In order for the playback to automatically start when view loads, let’s call "},{"type":"codeVoice","code":"play()"},{"text":" in ","type":"text"},{"type":"codeVoice","code":"viewDidLoad()"},{"text":".","type":"text"}]}],"code":"avplayerlayer-14.swift"},{"content":[{"type":"paragraph","inlineContent":[{"text":"Finally, let’s run the app. And as expected, we can see the video playing and the subtitles being updated.","type":"text"}]}],"type":"step","code":null,"runtimePreview":null,"caption":[],"media":"avplayerlayer.gif"}],"anchor":"AVPlayerLayer","title":"AVPlayerLayer","contentSection":[{"kind":"contentAndMedia","content":[{"inlineContent":[{"text":"In this section we will create a basic video player using ","type":"text"},{"code":"AVPlayerLayer","type":"codeVoice"},{"type":"text","text":", and we will add the subtitles as an overlay on top of the player. We will also learn how we can periodically update the subtitles by attaching the "},{"type":"codeVoice","code":"AVPlayer"},{"type":"text","text":" to subtitles view."}],"type":"paragraph"}],"mediaPosition":"trailing","media":"logo-rounded.png"}]}]},{"action":{"type":"reference","overridingTitle":"Get started","overridingTitleInlineContent":[{"text":"Get started","type":"text"}],"isActive":true,"identifier":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/SwiftAssRenderer\/AVPlayerView"},"featuredEyebrow":"Tutorial","kind":"callToAction","abstract":[{"text":"Learn how to easily integrate ","type":"text"},{"code":"SwiftAssRenderer","type":"codeVoice"},{"type":"text","text":" with AVKit’s "},{"code":"AVPlayerView","type":"codeVoice"},{"type":"text","text":"."}],"title":"AVPlayerView Integration"}],"identifier":{"url":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/SwiftAssRenderer\/AVPlayerLayer","interfaceLanguage":"swift"},"schemaVersion":{"minor":3,"major":0,"patch":0},"variants":[{"paths":["\/tutorials\/swiftassrenderer\/avplayerlayer"],"traits":[{"interfaceLanguage":"swift"}]}],"metadata":{"category":"Integration","role":"project","categoryPathComponent":"Integration-Tutorials","title":"AVPlayerLayer Integration"},"hierarchy":{"modules":[{"reference":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/Integration-Tutorials\/VideoPlayer-Integration","projects":[{"reference":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/SwiftAssRenderer\/VideoPlayer","sections":[{"kind":"task","reference":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/SwiftAssRenderer\/VideoPlayer#VideoPlayer"}]}]},{"reference":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/Integration-Tutorials\/AVPlayerLayer-Integration","projects":[{"reference":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/SwiftAssRenderer\/AVPlayerLayer","sections":[{"reference":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/SwiftAssRenderer\/AVPlayerLayer#AVPlayerLayer","kind":"task"}]}]},{"reference":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/Integration-Tutorials\/AVPlayerView-Integration","projects":[{"sections":[{"kind":"task","reference":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/SwiftAssRenderer\/AVPlayerView#AVPlayerView"}],"reference":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/SwiftAssRenderer\/AVPlayerView"}]},{"projects":[{"sections":[{"kind":"task","reference":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/SwiftAssRenderer\/AVPlayerViewController#AVPlayerViewController"}],"reference":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/SwiftAssRenderer\/AVPlayerViewController"}],"reference":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/Integration-Tutorials\/AVPlayerViewController-Integration"},{"reference":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/Integration-Tutorials\/Composition-Integration","projects":[{"sections":[{"reference":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/SwiftAssRenderer\/Composition#Composition","kind":"task"}],"reference":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/SwiftAssRenderer\/Composition"}]}],"paths":[["doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/Integration-Tutorials","doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/Integration-Tutorials\/$volume","doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/Integration-Tutorials\/AVPlayerLayer-Integration"]],"reference":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/Integration-Tutorials"},"kind":"project","references":{"avplayerlayer-11.swift":{"type":"file","fileType":"swift","highlights":[{"line":34},{"line":56},{"line":57},{"line":58},{"line":59}],"content":["import UIKit","import Combine","import AVFoundation","import SwiftAssRenderer","","final class VideoPlayerView: UIView {","    var playerLayer: AVPlayerLayer {","        layer as! AVPlayerLayer","    }","","    override final class var layerClass: Swift.AnyClass {","        AVPlayerLayer.self","    }","","    convenience init(player: AVPlayer) {","        self.init()","","        playerLayer.player = player","    }","}","","final class VideoPlayerViewController: UIViewController {","    private let player = AVPlayer(url: ...)","    private let renderer = AssSubtitlesRenderer(fontConfig: FontConfig(fontsPath: ...))","    private lazy var playerView = VideoPlayerView(player: player)","    private lazy var subtitlesView = AssSubtitlesView(renderer: renderer)","    private var cancellables = Set<AnyCancellable>()","","    override func viewDidLoad() {","        super.viewDidLoad()","","        addPlayerView()","        addSubtitlesView()","        loadSubtitleTrack()","    }","","    private func addPlayerView() {","        view.addSubview(playerView)","        playerView.translatesAutoresizingMaskIntoConstraints = false","        NSLayoutConstraint.activate([","            playerView.leadingAnchor.constraint(equalTo: view.leadingAnchor),","            playerView.trailingAnchor.constraint(equalTo: view.trailingAnchor),","            playerView.topAnchor.constraint(equalTo: view.topAnchor),","            playerView.bottomAnchor.constraint(equalTo: view.bottomAnchor)","        ])","    }","","    private func addSubtitlesView() {","        subtitlesView.attach(","            to: playerView.playerLayer,","            containerView: view,","            updateInterval: CMTime(value: 1, timescale: 10),","            storeCancellable: { [weak self] in self?.cancellables.insert($0) }","        )","    }","","    private func loadSubtitleTrack() {","","    }","}"],"fileName":"VideoPlayer.swift","syntax":"swift","identifier":"avplayerlayer-11.swift"},"doc://swift-ass-renderer.SwiftAssRenderer/tutorials/SwiftAssRenderer/VideoPlayer#VideoPlayer":{"identifier":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/SwiftAssRenderer\/VideoPlayer#VideoPlayer","type":"section","kind":"section","abstract":[{"type":"text","text":"Learn how to easily integrate "},{"code":"SwiftAssRenderer","type":"codeVoice"},{"type":"text","text":" with SwiftUI’s "},{"code":"VideoPlayer","type":"codeVoice"},{"type":"text","text":"."}],"title":"VideoPlayer","url":"\/tutorials\/swiftassrenderer\/videoplayer#VideoPlayer","role":"pseudoSymbol"},"doc://swift-ass-renderer.SwiftAssRenderer/tutorials/SwiftAssRenderer/VideoPlayer":{"identifier":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/SwiftAssRenderer\/VideoPlayer","type":"topic","kind":"project","abstract":[{"type":"text","text":"Learn how to easily integrate "},{"code":"SwiftAssRenderer","type":"codeVoice"},{"type":"text","text":" with SwiftUI’s "},{"code":"VideoPlayer","type":"codeVoice"},{"type":"text","text":"."}],"estimatedTime":"5min","title":"VideoPlayer Integration","url":"\/tutorials\/swiftassrenderer\/videoplayer","role":"project"},"avplayerlayer-1.swift":{"fileName":"VideoPlayer.swift","syntax":"swift","identifier":"avplayerlayer-1.swift","highlights":[],"type":"file","fileType":"swift","content":["import UIKit","import AVFoundation","import SwiftAssRenderer","","final class VideoPlayerViewController: UIViewController {","","}"]},"avplayerlayer-4.swift":{"type":"file","fileType":"swift","highlights":[{"line":23}],"content":["import UIKit","import AVFoundation","import SwiftAssRenderer","","final class VideoPlayerView: UIView {","    var playerLayer: AVPlayerLayer {","        layer as! AVPlayerLayer","    }","","    override final class var layerClass: Swift.AnyClass {","        AVPlayerLayer.self","    }","","    convenience init(player: AVPlayer) {","        self.init()","","        playerLayer.player = player","    }","}","","final class VideoPlayerViewController: UIViewController {","    private let player = AVPlayer(url: ...)","    private let renderer = AssSubtitlesRenderer(fontConfig: FontConfig(fontsPath: ...))","}"],"fileName":"VideoPlayer.swift","syntax":"swift","identifier":"avplayerlayer-4.swift"},"doc://swift-ass-renderer.SwiftAssRenderer/tutorials/SwiftAssRenderer/AVPlayerViewController":{"abstract":[{"text":"Learn how to easily integrate ","type":"text"},{"code":"SwiftAssRenderer","type":"codeVoice"},{"type":"text","text":" with AVKit’s "},{"type":"codeVoice","code":"AVPlayerViewController"},{"type":"text","text":"."}],"title":"AVPlayerViewController Integration","url":"\/tutorials\/swiftassrenderer\/avplayerviewcontroller","role":"project","kind":"project","type":"topic","estimatedTime":"5min","identifier":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/SwiftAssRenderer\/AVPlayerViewController"},"doc://swift-ass-renderer.SwiftAssRenderer/tutorials/SwiftAssRenderer/AVPlayerView#AVPlayerView":{"abstract":[{"type":"text","text":"Learn how to easily integrate "},{"type":"codeVoice","code":"SwiftAssRenderer"},{"type":"text","text":" with AVKit’s "},{"code":"AVPlayerView","type":"codeVoice"},{"text":".","type":"text"}],"title":"AVPlayerView","url":"\/tutorials\/swiftassrenderer\/avplayerview#AVPlayerView","role":"pseudoSymbol","kind":"section","type":"section","identifier":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/SwiftAssRenderer\/AVPlayerView#AVPlayerView"},"doc://swift-ass-renderer.SwiftAssRenderer/tutorials/SwiftAssRenderer/AVPlayerLayer":{"type":"topic","identifier":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/SwiftAssRenderer\/AVPlayerLayer","url":"\/tutorials\/swiftassrenderer\/avplayerlayer","kind":"project","estimatedTime":"10min","role":"project","abstract":[{"text":"Learn how to easily integrate ","type":"text"},{"type":"codeVoice","code":"SwiftAssRenderer"},{"type":"text","text":" with "},{"code":"AVKit","type":"codeVoice"},{"type":"text","text":"’s "},{"type":"codeVoice","code":"AVPlayerLayer"},{"text":".","type":"text"}],"title":"AVPlayerLayer Integration"},"doc://swift-ass-renderer.SwiftAssRenderer/tutorials/SwiftAssRenderer/AVPlayerLayer#AVPlayerLayer":{"role":"pseudoSymbol","type":"section","title":"AVPlayerLayer","url":"\/tutorials\/swiftassrenderer\/avplayerlayer#AVPlayerLayer","identifier":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/SwiftAssRenderer\/AVPlayerLayer#AVPlayerLayer","kind":"section","abstract":[{"type":"text","text":"Learn how to easily integrate "},{"type":"codeVoice","code":"SwiftAssRenderer"},{"type":"text","text":" with "},{"code":"AVKit","type":"codeVoice"},{"text":"’s ","type":"text"},{"type":"codeVoice","code":"AVPlayerLayer"},{"type":"text","text":"."}]},"avplayerlayer-7.swift":{"fileName":"VideoPlayer.swift","syntax":"swift","identifier":"avplayerlayer-7.swift","highlights":[{"line":26},{"line":27},{"line":28},{"line":29},{"line":30},{"line":31},{"line":32},{"line":33},{"line":34}],"type":"file","fileType":"swift","content":["import UIKit","import AVFoundation","import SwiftAssRenderer","","final class VideoPlayerView: UIView {","    var playerLayer: AVPlayerLayer {","        layer as! AVPlayerLayer","    }","","    override final class var layerClass: Swift.AnyClass {","        AVPlayerLayer.self","    }","","    convenience init(player: AVPlayer) {","        self.init()","","        playerLayer.player = player","    }","}","","final class VideoPlayerViewController: UIViewController {","    private let player = AVPlayer(url: ...)","    private let renderer = AssSubtitlesRenderer(fontConfig: FontConfig(fontsPath: ...))","    private lazy var playerView = VideoPlayerView(player: player)","    private lazy var subtitlesView = AssSubtitlesView(renderer: renderer)","","    override func viewDidLoad() {","        super.viewDidLoad()","","        addPlayerView()","    }","","    private func addPlayerView() {","    }","}"]},"logo-rounded.png":{"type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/swift-ass-renderer.SwiftAssRenderer\/logo-rounded.png"}],"alt":"Logo image","identifier":"logo-rounded.png"},"avplayerlayer-10.swift":{"fileName":"VideoPlayer.swift","syntax":"swift","identifier":"avplayerlayer-10.swift","highlights":[{"line":2},{"line":27},{"line":48},{"line":49},{"line":50},{"line":51},{"line":52},{"line":53}],"type":"file","fileType":"swift","content":["import UIKit","import Combine","import AVFoundation","import SwiftAssRenderer","","final class VideoPlayerView: UIView {","    var playerLayer: AVPlayerLayer {","        layer as! AVPlayerLayer","    }","","    override final class var layerClass: Swift.AnyClass {","        AVPlayerLayer.self","    }","","    convenience init(player: AVPlayer) {","        self.init()","","        playerLayer.player = player","    }","}","","final class VideoPlayerViewController: UIViewController {","    private let player = AVPlayer(url: ...)","    private let renderer = AssSubtitlesRenderer(fontConfig: FontConfig(fontsPath: ...))","    private lazy var playerView = VideoPlayerView(player: player)","    private lazy var subtitlesView = AssSubtitlesView(renderer: renderer)","    private var cancellables = Set<AnyCancellable>()","","    override func viewDidLoad() {","        super.viewDidLoad()","","        addPlayerView()","        addSubtitlesView()","    }","","    private func addPlayerView() {","        view.addSubview(playerView)","        playerView.translatesAutoresizingMaskIntoConstraints = false","        NSLayoutConstraint.activate([","            playerView.leadingAnchor.constraint(equalTo: view.leadingAnchor),","            playerView.trailingAnchor.constraint(equalTo: view.trailingAnchor),","            playerView.topAnchor.constraint(equalTo: view.topAnchor),","            playerView.bottomAnchor.constraint(equalTo: view.bottomAnchor)","        ])","    }","","    private func addSubtitlesView() {","        subtitlesView.attach(","            to: playerView.playerLayer,","            containerView: view,","            updateInterval: CMTime(value: 1, timescale: 10),","            storeCancellable: { [weak self] in self?.cancellables.insert($0) }","        )","    }","}"]},"doc://swift-ass-renderer.SwiftAssRenderer/tutorials/SwiftAssRenderer/AVPlayerViewController#AVPlayerViewController":{"role":"pseudoSymbol","type":"section","title":"AVPlayerViewController","url":"\/tutorials\/swiftassrenderer\/avplayerviewcontroller#AVPlayerViewController","identifier":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/SwiftAssRenderer\/AVPlayerViewController#AVPlayerViewController","kind":"section","abstract":[{"type":"text","text":"Learn how to easily integrate "},{"type":"codeVoice","code":"SwiftAssRenderer"},{"type":"text","text":" with AVKit’s "},{"code":"AVPlayerViewController","type":"codeVoice"},{"text":".","type":"text"}]},"avplayerlayer-6.swift":{"type":"file","fileType":"swift","highlights":[{"line":25}],"content":["import UIKit","import AVFoundation","import SwiftAssRenderer","","final class VideoPlayerView: UIView {","    var playerLayer: AVPlayerLayer {","        layer as! AVPlayerLayer","    }","","    override final class var layerClass: Swift.AnyClass {","        AVPlayerLayer.self","    }","","    convenience init(player: AVPlayer) {","        self.init()","","        playerLayer.player = player","    }","}","","final class VideoPlayerViewController: UIViewController {","    private let player = AVPlayer(url: ...)","    private let renderer = AssSubtitlesRenderer(fontConfig: FontConfig(fontsPath: ...))","    private lazy var playerView = VideoPlayerView(player: player)","    private lazy var subtitlesView = AssSubtitlesView(renderer: renderer)","}"],"fileName":"VideoPlayer.swift","syntax":"swift","identifier":"avplayerlayer-6.swift"},"doc://swift-ass-renderer.SwiftAssRenderer/tutorials/Integration-Tutorials/VideoPlayer-Integration":{"abstract":[],"title":"VideoPlayer Integration","url":"\/tutorials\/integration-tutorials\/videoplayer-integration","role":"article","kind":"article","type":"topic","identifier":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/Integration-Tutorials\/VideoPlayer-Integration"},"avplayerlayer-14.swift":{"fileName":"VideoPlayer.swift","syntax":"swift","identifier":"avplayerlayer-14.swift","highlights":[{"line":35}],"type":"file","fileType":"swift","content":["import UIKit","import Combine","import AVFoundation","import SwiftAssRenderer","","final class VideoPlayerView: UIView {","    var playerLayer: AVPlayerLayer {","        layer as! AVPlayerLayer","    }","","    override final class var layerClass: Swift.AnyClass {","        AVPlayerLayer.self","    }","","    convenience init(player: AVPlayer) {","        self.init()","","        playerLayer.player = player","    }","}","","final class VideoPlayerViewController: UIViewController {","    private let player = AVPlayer(url: ...)","    private let renderer = AssSubtitlesRenderer(fontConfig: FontConfig(fontsPath: ...))","    private lazy var playerView = VideoPlayerView(player: player)","    private lazy var subtitlesView = AssSubtitlesView(renderer: renderer)","    private var cancellables = Set<AnyCancellable>()","","    override func viewDidLoad() {","        super.viewDidLoad()","","        addPlayerView()","        addSubtitlesView()","        loadSubtitleTrack()","        player.play()","    }","","    private func addPlayerView() {","        view.addSubview(playerView)","        playerView.translatesAutoresizingMaskIntoConstraints = false","        NSLayoutConstraint.activate([","            playerView.leadingAnchor.constraint(equalTo: view.leadingAnchor),","            playerView.trailingAnchor.constraint(equalTo: view.trailingAnchor),","            playerView.topAnchor.constraint(equalTo: view.topAnchor),","            playerView.bottomAnchor.constraint(equalTo: view.bottomAnchor)","        ])","    }","","    private func addSubtitlesView() {","        subtitlesView.attach(","            to: playerView.playerLayer,","            containerView: view,","            updateInterval: CMTime(value: 1, timescale: 10),","            storeCancellable: { [weak self] in self?.cancellables.insert($0) }","        )","    }","","    private func loadSubtitleTrack() {","        Task {","            do {","                let contents = try await ...","                renderer.loadTrack(content: contents)","            } catch {","                print(error)","            }","        }","    }","}"]},"avplayerlayer-9.swift":{"type":"file","fileType":"swift","highlights":[{"line":31},{"line":44},{"line":45},{"line":46},{"line":47}],"content":["import UIKit","import AVFoundation","import SwiftAssRenderer","","final class VideoPlayerView: UIView {","    var playerLayer: AVPlayerLayer {","        layer as! AVPlayerLayer","    }","","    override final class var layerClass: Swift.AnyClass {","        AVPlayerLayer.self","    }","","    convenience init(player: AVPlayer) {","        self.init()","","        playerLayer.player = player","    }","}","","final class VideoPlayerViewController: UIViewController {","    private let player = AVPlayer(url: ...)","    private let renderer = AssSubtitlesRenderer(fontConfig: FontConfig(fontsPath: ...))","    private lazy var playerView = VideoPlayerView(player: player)","    private lazy var subtitlesView = AssSubtitlesView(renderer: renderer)","","    override func viewDidLoad() {","        super.viewDidLoad()","","        addPlayerView()","        addSubtitlesView()","    }","","    private func addPlayerView() {","        view.addSubview(playerView)","        playerView.translatesAutoresizingMaskIntoConstraints = false","        NSLayoutConstraint.activate([","            playerView.leadingAnchor.constraint(equalTo: view.leadingAnchor),","            playerView.trailingAnchor.constraint(equalTo: view.trailingAnchor),","            playerView.topAnchor.constraint(equalTo: view.topAnchor),","            playerView.bottomAnchor.constraint(equalTo: view.bottomAnchor)","        ])","    }","","    private func addSubtitlesView() {","","    }","}"],"fileName":"VideoPlayer.swift","syntax":"swift","identifier":"avplayerlayer-9.swift"},"doc://swift-ass-renderer.SwiftAssRenderer/tutorials/Integration-Tutorials":{"role":"overview","type":"topic","title":"Integration","url":"\/tutorials\/integration-tutorials","identifier":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/Integration-Tutorials","kind":"overview","abstract":[{"code":"SwiftAssRenderer","type":"codeVoice"},{"type":"text","text":" can be integrated with most players available in "},{"type":"codeVoice","code":"SwiftUI"},{"type":"text","text":", "},{"type":"codeVoice","code":"UIKit"},{"type":"text","text":" and "},{"code":"AppKit","type":"codeVoice"},{"text":".","type":"text"}]},"doc://swift-ass-renderer.SwiftAssRenderer/tutorials/Integration-Tutorials/AVPlayerView-Integration":{"role":"article","type":"topic","title":"AVPlayerView Integration","url":"\/tutorials\/integration-tutorials\/avplayerview-integration","identifier":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/Integration-Tutorials\/AVPlayerView-Integration","kind":"article","abstract":[]},"doc://swift-ass-renderer.SwiftAssRenderer/tutorials/SwiftAssRenderer/Composition#Composition":{"role":"pseudoSymbol","type":"section","title":"Composition","url":"\/tutorials\/swiftassrenderer\/composition#Composition","identifier":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/SwiftAssRenderer\/Composition#Composition","kind":"section","abstract":[{"text":"Learn how to easily integrate ","type":"text"},{"code":"SwiftAssRenderer","type":"codeVoice"},{"type":"text","text":" with "},{"type":"codeVoice","code":"AVPlayerItem"},{"type":"text","text":" by burning the subtitles in the video on the fly."}]},"avplayerlayer-12.swift":{"fileName":"VideoPlayer.swift","syntax":"swift","identifier":"avplayerlayer-12.swift","highlights":[{"line":58},{"line":59},{"line":60},{"line":61},{"line":62},{"line":63},{"line":64}],"type":"file","fileType":"swift","content":["import UIKit","import Combine","import AVFoundation","import SwiftAssRenderer","","final class VideoPlayerView: UIView {","    var playerLayer: AVPlayerLayer {","        layer as! AVPlayerLayer","    }","","    override final class var layerClass: Swift.AnyClass {","        AVPlayerLayer.self","    }","","    convenience init(player: AVPlayer) {","        self.init()","","        playerLayer.player = player","    }","}","","final class VideoPlayerViewController: UIViewController {","    private let player = AVPlayer(url: ...)","    private let renderer = AssSubtitlesRenderer(fontConfig: FontConfig(fontsPath: ...))","    private lazy var playerView = VideoPlayerView(player: player)","    private lazy var subtitlesView = AssSubtitlesView(renderer: renderer)","    private var cancellables = Set<AnyCancellable>()","","    override func viewDidLoad() {","        super.viewDidLoad()","","        addPlayerView()","        addSubtitlesView()","        loadSubtitleTrack()","    }","","    private func addPlayerView() {","        view.addSubview(playerView)","        playerView.translatesAutoresizingMaskIntoConstraints = false","        NSLayoutConstraint.activate([","            playerView.leadingAnchor.constraint(equalTo: view.leadingAnchor),","            playerView.trailingAnchor.constraint(equalTo: view.trailingAnchor),","            playerView.topAnchor.constraint(equalTo: view.topAnchor),","            playerView.bottomAnchor.constraint(equalTo: view.bottomAnchor)","        ])","    }","","    private func addSubtitlesView() {","        subtitlesView.attach(","            to: playerView.playerLayer,","            containerView: view,","            updateInterval: CMTime(value: 1, timescale: 10),","            storeCancellable: { [weak self] in self?.cancellables.insert($0) }","        )","    }","","    private func loadSubtitleTrack() {","        Task {","            do {","                let contents = try await ...","            } catch {","                print(error)","            }","        }","    }","}"]},"avplayerlayer-13.swift":{"type":"file","fileType":"swift","highlights":[{"line":61}],"content":["import UIKit","import Combine","import AVFoundation","import SwiftAssRenderer","","final class VideoPlayerView: UIView {","    var playerLayer: AVPlayerLayer {","        layer as! AVPlayerLayer","    }","","    override final class var layerClass: Swift.AnyClass {","        AVPlayerLayer.self","    }","","    convenience init(player: AVPlayer) {","        self.init()","","        playerLayer.player = player","    }","}","","final class VideoPlayerViewController: UIViewController {","    private let player = AVPlayer(url: ...)","    private let renderer = AssSubtitlesRenderer(fontConfig: FontConfig(fontsPath: ...))","    private lazy var playerView = VideoPlayerView(player: player)","    private lazy var subtitlesView = AssSubtitlesView(renderer: renderer)","    private var cancellables = Set<AnyCancellable>()","","    override func viewDidLoad() {","        super.viewDidLoad()","","        addPlayerView()","        addSubtitlesView()","        loadSubtitleTrack()","    }","","    private func addPlayerView() {","        view.addSubview(playerView)","        playerView.translatesAutoresizingMaskIntoConstraints = false","        NSLayoutConstraint.activate([","            playerView.leadingAnchor.constraint(equalTo: view.leadingAnchor),","            playerView.trailingAnchor.constraint(equalTo: view.trailingAnchor),","            playerView.topAnchor.constraint(equalTo: view.topAnchor),","            playerView.bottomAnchor.constraint(equalTo: view.bottomAnchor)","        ])","    }","","    private func addSubtitlesView() {","        subtitlesView.attach(","            to: playerView.playerLayer,","            containerView: view,","            updateInterval: CMTime(value: 1, timescale: 10),","            storeCancellable: { [weak self] in self?.cancellables.insert($0) }","        )","    }","","    private func loadSubtitleTrack() {","        Task {","            do {","                let contents = try await ...","                renderer.loadTrack(content: contents)","            } catch {","                print(error)","            }","        }","    }","}"],"fileName":"VideoPlayer.swift","syntax":"swift","identifier":"avplayerlayer-13.swift"},"doc://swift-ass-renderer.SwiftAssRenderer/tutorials/SwiftAssRenderer/Composition":{"abstract":[{"text":"Learn how to easily integrate ","type":"text"},{"code":"SwiftAssRenderer","type":"codeVoice"},{"type":"text","text":" with "},{"type":"codeVoice","code":"AVPlayerItem"},{"type":"text","text":" by burning the subtitles in the video on the fly."}],"title":"Composition Integration","url":"\/tutorials\/swiftassrenderer\/composition","role":"project","kind":"project","type":"topic","estimatedTime":"5min","identifier":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/SwiftAssRenderer\/Composition"},"avplayerlayer-2.swift":{"fileName":"VideoPlayer.swift","syntax":"swift","identifier":"avplayerlayer-2.swift","highlights":[{"line":5},{"line":6},{"line":7},{"line":8},{"line":9},{"line":10},{"line":11},{"line":12},{"line":13},{"line":14},{"line":15},{"line":16},{"line":17},{"line":18},{"line":19},{"line":20}],"type":"file","fileType":"swift","content":["import UIKit","import AVFoundation","import SwiftAssRenderer","","final class VideoPlayerView: UIView {","    var playerLayer: AVPlayerLayer {","        layer as! AVPlayerLayer","    }","","    override final class var layerClass: Swift.AnyClass {","        AVPlayerLayer.self","    }","","    convenience init(player: AVPlayer) {","        self.init()","","        playerLayer.player = player","    }","}","","final class VideoPlayerViewController: UIViewController {","","}"]},"doc://swift-ass-renderer.SwiftAssRenderer/tutorials/Integration-Tutorials/Composition-Integration":{"role":"article","type":"topic","title":"Composition Integration","url":"\/tutorials\/integration-tutorials\/composition-integration","identifier":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/Integration-Tutorials\/Composition-Integration","kind":"article","abstract":[]},"avplayerlayer.gif":{"type":"image","variants":[{"traits":["1x","light"],"url":"\/images\/swift-ass-renderer.SwiftAssRenderer\/avplayerlayer.gif"}],"alt":"Green video rectangle with a text  at the bottom that says \\\"Wow!\\\"","identifier":"avplayerlayer.gif"},"doc://swift-ass-renderer.SwiftAssRenderer/tutorials/Integration-Tutorials/AVPlayerLayer-Integration":{"type":"topic","abstract":[],"identifier":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/Integration-Tutorials\/AVPlayerLayer-Integration","role":"article","url":"\/tutorials\/integration-tutorials\/avplayerlayer-integration","title":"AVPlayerLayer Integration","kind":"article"},"avplayerlayer-8.swift":{"fileName":"VideoPlayer.swift","syntax":"swift","identifier":"avplayerlayer-8.swift","highlights":[{"line":34},{"line":35},{"line":36},{"line":37},{"line":38},{"line":39},{"line":40},{"line":41}],"type":"file","fileType":"swift","content":["import UIKit","import AVFoundation","import SwiftAssRenderer","","final class VideoPlayerView: UIView {","    var playerLayer: AVPlayerLayer {","        layer as! AVPlayerLayer","    }","","    override final class var layerClass: Swift.AnyClass {","        AVPlayerLayer.self","    }","","    convenience init(player: AVPlayer) {","        self.init()","","        playerLayer.player = player","    }","}","","final class VideoPlayerViewController: UIViewController {","    private let player = AVPlayer(url: ...)","    private let renderer = AssSubtitlesRenderer(fontConfig: FontConfig(fontsPath: ...))","    private lazy var playerView = VideoPlayerView(player: player)","    private lazy var subtitlesView = AssSubtitlesView(renderer: renderer)","","    override func viewDidLoad() {","        super.viewDidLoad()","","        addPlayerView()","    }","","    private func addPlayerView() {","        view.addSubview(playerView)","        playerView.translatesAutoresizingMaskIntoConstraints = false","        NSLayoutConstraint.activate([","            playerView.leadingAnchor.constraint(equalTo: view.leadingAnchor),","            playerView.trailingAnchor.constraint(equalTo: view.trailingAnchor),","            playerView.topAnchor.constraint(equalTo: view.topAnchor),","            playerView.bottomAnchor.constraint(equalTo: view.bottomAnchor)","        ])","    }","}"]},"avplayerlayer-5.swift":{"type":"file","fileType":"swift","highlights":[{"line":24}],"content":["import UIKit","import AVFoundation","import SwiftAssRenderer","","final class VideoPlayerView: UIView {","    var playerLayer: AVPlayerLayer {","        layer as! AVPlayerLayer","    }","","    override final class var layerClass: Swift.AnyClass {","        AVPlayerLayer.self","    }","","    convenience init(player: AVPlayer) {","        self.init()","","        playerLayer.player = player","    }","}","","final class VideoPlayerViewController: UIViewController {","    private let player = AVPlayer(url: ...)","    private let renderer = AssSubtitlesRenderer(fontConfig: FontConfig(fontsPath: ...))","    private lazy var playerView = VideoPlayerView(player: player)","}"],"fileName":"VideoPlayer.swift","syntax":"swift","identifier":"avplayerlayer-5.swift"},"avplayerlayer-3.swift":{"fileName":"VideoPlayer.swift","syntax":"swift","identifier":"avplayerlayer-3.swift","highlights":[{"line":22}],"type":"file","fileType":"swift","content":["import UIKit","import AVFoundation","import SwiftAssRenderer","","final class VideoPlayerView: UIView {","    var playerLayer: AVPlayerLayer {","        layer as! AVPlayerLayer","    }","","    override final class var layerClass: Swift.AnyClass {","        AVPlayerLayer.self","    }","","    convenience init(player: AVPlayer) {","        self.init()","","        playerLayer.player = player","    }","}","","final class VideoPlayerViewController: UIViewController {","    private let player = AVPlayer(url: ...)","}"]},"doc://swift-ass-renderer.SwiftAssRenderer/tutorials/SwiftAssRenderer/AVPlayerView":{"abstract":[{"type":"text","text":"Learn how to easily integrate "},{"type":"codeVoice","code":"SwiftAssRenderer"},{"text":" with AVKit’s ","type":"text"},{"code":"AVPlayerView","type":"codeVoice"},{"type":"text","text":"."}],"title":"AVPlayerView Integration","url":"\/tutorials\/swiftassrenderer\/avplayerview","role":"project","kind":"project","type":"topic","estimatedTime":"10min","identifier":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/SwiftAssRenderer\/AVPlayerView"},"doc://swift-ass-renderer.SwiftAssRenderer/tutorials/Integration-Tutorials/AVPlayerViewController-Integration":{"type":"topic","abstract":[],"identifier":"doc:\/\/swift-ass-renderer.SwiftAssRenderer\/tutorials\/Integration-Tutorials\/AVPlayerViewController-Integration","role":"article","url":"\/tutorials\/integration-tutorials\/avplayerviewcontroller-integration","title":"AVPlayerViewController Integration","kind":"article"}}}